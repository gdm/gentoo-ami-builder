0. disable selinux before reboot of host

1 get rid of 90 sec delay by kernel

[    6.747165] udevd[1162]: starting eudev-3.2.5
[    7.190274] ena 0000:00:05.0 enp0s5: renamed from eth0
[    9.480893] EXT4-fs (nvme0n1p1): re-mounted. Opts: (null)
[    9.521635] urandom_read: 5 callbacks suppressed
[    9.521635] random: ln: uninitialized urandom read (6 bytes read)
[    9.691067] random: mktemp: uninitialized urandom read (10 bytes read)
[   93.443431] random: crng init done

try with rng-tools - didn't help

https://unix.stackexchange.com/questions/442698/when-i-log-in-it-hangs-until-crng-init-done
https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=897572#82
https://www.linuxquestions.org/questions/debian-26/debian-hangs-at-boot-with-random-crng-init-done-4175613405/

https://forums.gentoo.org/viewtopic-t-1083804-start-0.html


2. make sure AWS displays dmesg (limit speed tty)

(in progress - test with new cloud-init) hostname not persistent (installed by cloud-init)
related issue: https://bugs.launchpad.net/cloud-init/+bug/1246485
try  : /etc/hostname with cloud-init

/etc/conf.d/hostname:
hostname="# Set to the hostname of this machinegentoo"




(in progress - test with trust cpu code - new in 4.18 kernel)

gentoo seed for urandom
/var/lib/misc/random-seed
how to setup with cloud-init: http://blog.dustinkirkland.com/2012/10/seed-devurandom-through-metadata-ec2.html
also urandom should be configured to start after cloud-init-local


log

